# useQuery

`useQuery` provides an easy way to make any action that triggers a loading, may return some data and may generate an error (typical API call use case).

## Example

```typescript
import { useQuery } from '@saramorillon/hooks'
import { getData } from './service'

function MyComponent() {
  const { execute, loading, error, result } = useQuery(getData)

  if (loading) return <Spinner />
  if (error) return <Error />
  return (
    <>
      <Button onClick={execute}>Load data</Button>
      <Table data={result} />
    </>
  )
}
```

## API

```typescript
useQuery<T>(queryFn: () => Promise<T>, options?: IQueryOptions<T>): IQueryResult<T>
```

### Arguments

`queryFn: () => Promise<T>` - The function to run. **:warning: Must be memoized to avoid potential infinite loops.**

`options?: IQueryOptions<T>` - An object containing:

- `autoRun?: boolean` - indicates weither of not the query should be run automatically on component mount
- `defaultValue?: T` - the default value returned by the hook

### Returns

An object containing:

- `execute: () => Promise<void>` - the function to execute the action
- `loading: boolean` - indicates weither the action is currently pending or not
- `error?: unknown` - the error potentially generated by the action
- `result: T` - the value returned by the action
