# useFetch

:warning: Deprecated, use `useQuery` instead.

`useFetch` provides an easy way to make any action that triggers a loading, returns some data and may generate an error (typical API call use case).

It also provides a replay function to replay the action and a replace function to replace the data.

## Example

```typescript
import { useFetch } from '@saramorillon/hooks'
import { getData } from './service'

function MyComponent() {
  const [data, status, refresh] = useFetch(getData, null)

  if (status.loading) return <Spinner />
  if (status.error) return <Error />
  return (
    <>
      <Button onClick={refresh} />
      <Table data={data} />
    </>
  )
}
```

## API

```typescript
useFetch<T>(fetchFn: () => Promise<T>, defaultValue: T, autoFetch: boolean): [T, IFetchedStatus, () => void, React.Dispatch<React.SetStateAction<T>>]
```

### Arguments

`fetchFn: () => Promise<T>` - The action to run. **:warning: Must be memoized to avoid potential infinite loops.**

`defaultValue: T` - The default value to return.

`autoFetch: boolean` - Weither the fetch function should be run on mount or not. Default is `true`.

### Returns

An array containing:

- `T` - the value returned by the action
- `IFetchedStatus` - an object containing
  - `loading: boolean` - indicates weither the action is currently pending or not
  - `error: unknown` - the error potentially generated by the action
- `() => void` - a replay function
- `React.Dispatch<React.SetStateAction<T>>` - a replace function
