# useAction

`useAction` offers an easy way to handle loading and error on asynchronous action.

## Example

```tsx
import { useAction } from '@saramorillon/hooks'
import { getData } from './service'

function MyComponent() {
  const { execute, loading, error, result } = useAction(getData)

  if (loading) return <Spinner />
  if (error) return <Error />
  return (
    <>
      <Button onClick={execute}>Load data</Button>
      <Table data={result} />
    </>
  )
}
```

## API

```typescript
useAction<P extends unknown[], T>(action: (...args: P) => Promise<T>): IActionResult<T>
```

### Arguments

`action: (...args: P) => Promise<T>` - The function to run. **:warning: Must be memoized to avoid potential infinite loops.**

### Returns

An array containing:

- an object containing:
  - `loading: boolean` - indicates weither the action is currently pending or not.
  - `error?: unknown` - the error potentially generated by the action.
- `execute: (...args: P) => Promise<T | undefined>` - the function to execute the action.
- `cancel: () => void` - a function to cancel the action.
